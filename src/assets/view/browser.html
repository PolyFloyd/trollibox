{{ define "title" }}Browser{{ end }}

{{ define "pagename" }}browser{{ end }}

{{ define "content" }}
	<div class="browser">
		<div class="col-xs-12 col-sm-8 col-lg-9 browser-views">
			<ul class="browser-categories">
				<li role="presentation" class="active" id="browser-show-search">
					<a class="glyphicon glyphicon-search" title="Search Everything" href="#"></a>
				</li>
			</ul>

			<div class="browser-content"></div>
		</div>

		<div class="hidden-xs col-sm-4 col-lg-3 browser-player"></div>
	</div>
{{ end }}

{{ define "init" }}
	<script>
		var player = new Player();
		player.on('error', function(err) {
			console.error(err);
		});

		var browserViews = {
			search: new BrowserSearchView({
				model: player,
			}),
		};

		Object.keys(browserViews).forEach(function(name, i) {
			var view = browserViews[name];
			view.$el.toggleClass('hidden', i !== 0);
			$('.browser-content').append(view.$el);
			$('#browser-show-'+name).on('click', function() {
				$('.browser-view').addClass('hidden');
				view.$el.removeClass('hidden');
			});
		});

		var playerView = new PlayerView({
			model: player,
		});
		$('.browser-player').append(playerView.$el);
	</script>
{{ end }}
